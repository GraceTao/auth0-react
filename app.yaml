runtime: nodejs20  # Use Python 3.9 as the runtime, but this won't matter much as we are serving static files.

instance_class: F2  # You can adjust this to control the instance size.

env_variables:
  VITE_AUTH0DOMAIN1: ${VITE_AUTH0DOMAIN1}
  VITE_AUTH0CLIENTID1: ${VITE_AUTH0CLIENTID1}
  
handlers:
  # Serve static assets generated by Vite (e.g., JS, CSS)
  - url: /assets
    static_dir: dist/assets

  # Serve the root HTML file
  - url: /
    static_files: dist/index.html
    upload: dist/index.html

  # Serve all other static files (e.g., images, fonts)
  - url: /(.*)
    static_files: dist/\1
    upload: dist/(.*)

  # Redirect 404 routes to index.html for client-side routing in React (optional)
  - url: /.*
    static_files: dist/index.html
    upload: dist/index.html

# Optional scaling settings
automatic_scaling:
  target_cpu_utilization: 0.65
  max_instances: 2
